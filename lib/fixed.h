#include <stdint.h>

// fixed point library
#define FIXED_PREC 10

typedef int16_t fxd_t;

#define fxd_new(x) (x)
#define fxd_from_float(x) (fxd_t)((x) * (1 << FIXED_PREC)) // slow
#define fxd_to_float(x) ((float)(x) / (1 << FIXED_PREC)) // slow
#define fxd_to_int(x) ((x) >> FIXED_PREC)
#define fxd_add(x, y) ((x) + (y))
#define fxd_mul(x, y) (((x) * (y)) >> FIXED_PREC)
#define fxd_muli(ix, y) ((ix) * (y))

const fxd_t _fxd_sin_t[360] = {
	0, // 0
	17, // 1
	35, // 2
	53, // 3
	71, // 4
	89, // 5
	107, // 6
	124, // 7
	142, // 8
	160, // 9
	177, // 10
	195, // 11
	212, // 12
	230, // 13
	247, // 14
	265, // 15
	282, // 16
	299, // 17
	316, // 18
	333, // 19
	350, // 20
	366, // 21
	383, // 22
	400, // 23
	416, // 24
	432, // 25
	448, // 26
	464, // 27
	480, // 28
	496, // 29
	511, // 30
	527, // 31
	542, // 32
	557, // 33
	572, // 34
	587, // 35
	601, // 36
	616, // 37
	630, // 38
	644, // 39
	658, // 40
	671, // 41
	685, // 42
	698, // 43
	711, // 44
	724, // 45
	736, // 46
	748, // 47
	760, // 48
	772, // 49
	784, // 50
	795, // 51
	806, // 52
	817, // 53
	828, // 54
	838, // 55
	848, // 56
	858, // 57
	868, // 58
	877, // 59
	886, // 60
	895, // 61
	904, // 62
	912, // 63
	920, // 64
	928, // 65
	935, // 66
	942, // 67
	949, // 68
	955, // 69
	962, // 70
	968, // 71
	973, // 72
	979, // 73
	984, // 74
	989, // 75
	993, // 76
	997, // 77
	1001, // 78
	1005, // 79
	1008, // 80
	1011, // 81
	1014, // 82
	1016, // 83
	1018, // 84
	1020, // 85
	1021, // 86
	1022, // 87
	1023, // 88
	1023, // 89
	1024, // 90
	1023, // 91
	1023, // 92
	1022, // 93
	1021, // 94
	1020, // 95
	1018, // 96
	1016, // 97
	1014, // 98
	1011, // 99
	1008, // 100
	1005, // 101
	1001, // 102
	997, // 103
	993, // 104
	989, // 105
	984, // 106
	979, // 107
	973, // 108
	968, // 109
	962, // 110
	955, // 111
	949, // 112
	942, // 113
	935, // 114
	928, // 115
	920, // 116
	912, // 117
	904, // 118
	895, // 119
	886, // 120
	877, // 121
	868, // 122
	858, // 123
	848, // 124
	838, // 125
	828, // 126
	817, // 127
	806, // 128
	795, // 129
	784, // 130
	772, // 131
	760, // 132
	748, // 133
	736, // 134
	724, // 135
	711, // 136
	698, // 137
	685, // 138
	671, // 139
	658, // 140
	644, // 141
	630, // 142
	616, // 143
	601, // 144
	587, // 145
	572, // 146
	557, // 147
	542, // 148
	527, // 149
	511, // 150
	496, // 151
	480, // 152
	464, // 153
	448, // 154
	432, // 155
	416, // 156
	400, // 157
	383, // 158
	366, // 159
	350, // 160
	333, // 161
	316, // 162
	299, // 163
	282, // 164
	265, // 165
	247, // 166
	230, // 167
	212, // 168
	195, // 169
	177, // 170
	160, // 171
	142, // 172
	124, // 173
	107, // 174
	89, // 175
	71, // 176
	53, // 177
	35, // 178
	17, // 179
	0, // 180
	-17, // 181
	-35, // 182
	-53, // 183
	-71, // 184
	-89, // 185
	-107, // 186
	-124, // 187
	-142, // 188
	-160, // 189
	-177, // 190
	-195, // 191
	-212, // 192
	-230, // 193
	-247, // 194
	-265, // 195
	-282, // 196
	-299, // 197
	-316, // 198
	-333, // 199
	-350, // 200
	-366, // 201
	-383, // 202
	-400, // 203
	-416, // 204
	-432, // 205
	-448, // 206
	-464, // 207
	-480, // 208
	-496, // 209
	-512, // 210
	-527, // 211
	-542, // 212
	-557, // 213
	-572, // 214
	-587, // 215
	-601, // 216
	-616, // 217
	-630, // 218
	-644, // 219
	-658, // 220
	-671, // 221
	-685, // 222
	-698, // 223
	-711, // 224
	-724, // 225
	-736, // 226
	-748, // 227
	-760, // 228
	-772, // 229
	-784, // 230
	-795, // 231
	-806, // 232
	-817, // 233
	-828, // 234
	-838, // 235
	-848, // 236
	-858, // 237
	-868, // 238
	-877, // 239
	-886, // 240
	-895, // 241
	-904, // 242
	-912, // 243
	-920, // 244
	-928, // 245
	-935, // 246
	-942, // 247
	-949, // 248
	-955, // 249
	-962, // 250
	-968, // 251
	-973, // 252
	-979, // 253
	-984, // 254
	-989, // 255
	-993, // 256
	-997, // 257
	-1001, // 258
	-1005, // 259
	-1008, // 260
	-1011, // 261
	-1014, // 262
	-1016, // 263
	-1018, // 264
	-1020, // 265
	-1021, // 266
	-1022, // 267
	-1023, // 268
	-1023, // 269
	-1024, // 270
	-1023, // 271
	-1023, // 272
	-1022, // 273
	-1021, // 274
	-1020, // 275
	-1018, // 276
	-1016, // 277
	-1014, // 278
	-1011, // 279
	-1008, // 280
	-1005, // 281
	-1001, // 282
	-997, // 283
	-993, // 284
	-989, // 285
	-984, // 286
	-979, // 287
	-973, // 288
	-968, // 289
	-962, // 290
	-955, // 291
	-949, // 292
	-942, // 293
	-935, // 294
	-928, // 295
	-920, // 296
	-912, // 297
	-904, // 298
	-895, // 299
	-886, // 300
	-877, // 301
	-868, // 302
	-858, // 303
	-848, // 304
	-838, // 305
	-828, // 306
	-817, // 307
	-806, // 308
	-795, // 309
	-784, // 310
	-772, // 311
	-760, // 312
	-748, // 313
	-736, // 314
	-724, // 315
	-711, // 316
	-698, // 317
	-685, // 318
	-671, // 319
	-658, // 320
	-644, // 321
	-630, // 322
	-616, // 323
	-601, // 324
	-587, // 325
	-572, // 326
	-557, // 327
	-542, // 328
	-527, // 329
	-512, // 330
	-496, // 331
	-480, // 332
	-464, // 333
	-448, // 334
	-432, // 335
	-416, // 336
	-400, // 337
	-383, // 338
	-366, // 339
	-350, // 340
	-333, // 341
	-316, // 342
	-299, // 343
	-282, // 344
	-265, // 345
	-247, // 346
	-230, // 347
	-212, // 348
	-195, // 349
	-177, // 350
	-160, // 351
	-142, // 352
	-124, // 353
	-107, // 354
	-89, // 355
	-71, // 356
	-53, // 357
	-35, // 358
	-17, // 359
};

#define fxd_sin(x) _fxd_sin_t[(x) % 360]
#define fxd_cos(x) fxd_sin(x + 90)
